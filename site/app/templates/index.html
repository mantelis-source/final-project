{% extends "layout.html" %}
{% block title %}Home{% endblock %}
{% block page_content %}

<div class="nav-bar-wraper">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#" style="font-weight: 800;">
                    Hello, {{ user_data.first_name }}
                    {{ user_data.last_name }}</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/logout">Logout</a>
            </li>
        </ul>

    </nav>
</div>


<div class="todo-container">
    <div class="todo_form">

        <form action="" method="POST">
            <div class="form-group mb-3">
                <input type="text" class="form-control" name="todo" placeholder="New to-do..." required>
            </div>
            <button type="submit" class="btn btn-primary mb-4">Add</button>
        </form>

    </div>

    <div class="todo_list">
        <ul class="list-group list-group-flush">
            {% for todo in user_data.todo_list %}
            {% if not todo.is_done %}
            <li class="list-group-item d-flex">
                <p class="p-0 m-0 flex-grow-1">{{ todo.description }}</p>
                <button class="btn btn-success" onclick="updateItemStatus('{{ todo.id }}')">Done</button>
                <button class="btn btn-danger" onclick="removeItem('{{ todo.id }}')">Remove</button>
            </li>
            <small class="list-group-item d-flex">Created: {{ todo.created_date }}</small>
            {% else %}
            <li class="list-group-item d-flex done-small">
                <p class="p-0 m-0 flex-grow-1">{{ todo.description }}</p>
                <button class="btn btn-danger" onclick="removeItem('{{ todo.id }}')">Remove</button>
            </li>
            <small class="list-group-item d-flex done-small">
                Created: {{ todo.created_date }}. &emsp; &emsp; &emsp; Done: {{ todo.done_date }}</small>
            {% endif %}
            {% endfor %}
        </ul>
        {% endblock %}
    </div>

</div>